(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),o=t.n(a),r=t(16),u=t.n(r),i=(t(7),t(6)),s=t(3),l=function(e){return Object(c.jsxs)("div",{children:[e.title,Object(c.jsx)("input",{value:e.value,onChange:e.onChange})]})},d=function(e){return Object(c.jsxs)("form",{onSubmit:e.addPerson,children:[Object(c.jsx)(l,{title:"name: ",value:e.newName,onChange:e.handleNameChange}),Object(c.jsx)(l,{title:"number: ",value:e.newPhone,onChange:e.handlePhoneChange}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.message;return console.log({message:n}),null===n?null:Object(c.jsx)("div",{className:"error",children:n})},j=function(e){return Object(c.jsxs)("div",{children:["filter shown with:"," ",Object(c.jsx)("input",{value:e.nameFilter,onChange:e.handleNameFilter})]})},f=function(e){return e.persons.map((function(n){return Object(c.jsxs)("div",{children:[n.name," ",n.number," ",Object(c.jsx)("button",{onClick:function(){return e.handleDelete(n.id)},children:"delete"})]})}))},b=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"success",children:n})},m=t(4),O=t.n(m),p="/api/persons",v=function(){return O.a.get(p).then((function(e){return e.data}))},x=function(e){return O.a.post(p,e).then((function(e){return e.data}))},g=function(e,n){return O.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return O.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},C=function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],r=Object(a.useState)(""),u=Object(s.a)(r,2),l=u[0],m=u[1],O=Object(a.useState)(""),p=Object(s.a)(O,2),C=p[0],N=p[1],S=Object(a.useState)(""),k=Object(s.a)(S,2),P=k[0],T=k[1],y=Object(a.useState)(null),D=Object(s.a)(y,2),F=D[0],L=D[1],A=Object(a.useState)(null),E=Object(s.a)(A,2),I=E[0],J=E[1];Object(a.useEffect)((function(){v().then((function(e){o(e)}))}),[]);var B=P.length>0?t.filter((function(e){return e.name.includes(P)})):t;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(b,{message:I}),Object(c.jsx)(h,{message:F}),Object(c.jsx)(j,{nameFilter:P,handleNameFilter:function(e){T(e.target.value)}}),Object(c.jsx)("h2",{children:"Add a new person"}),Object(c.jsx)(d,{addPerson:function(e){if(e.preventDefault(),t.some((function(e){return e.name.toLowerCase()===l.toLowerCase()}))){var n=t.find((function(e){return e.name.toLowerCase()===l.toLowerCase()})),c=window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?")),a=Object(i.a)(Object(i.a)({},n),{},{number:C}),r=n.id;c&&g(r,a).then((function(e){o(t.map((function(n){return n.id!==r?n:e}))),m(""),N(""),J("Updated ".concat(e.name)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){L(e.response.data.error),setTimeout((function(){L(null)}),5e3)}))}else{x({name:l,number:C}).then((function(e){o(t.concat(e)),m(""),N(""),J("Added ".concat(e.name)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){L(e.response.data.error),setTimeout((function(){L(null)}),5e3)}))}},newName:l,handleNameChange:function(e){m(e.target.value)},newPhone:C,handlePhoneChange:function(e){N(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(f,{persons:B,handleDelete:function(e){return function(e){var n=t.find((function(n){return n.id==e}));window.confirm("Delete ".concat(n.name,"?"))&&w(e).then((function(n){o(t.filter((function(n){return n.id!==e})))})).catch((function(e){L("Information of ".concat(n.name," has already been removed from the server")),setTimeout((function(){L(null)}),5e3)}))}(e)}})]})};u.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(C,{})}),document.getElementById("root"))},7:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.8363e146.chunk.js.map