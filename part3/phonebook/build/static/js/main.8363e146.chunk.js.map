{"version":3,"sources":["components/PersonForm.js","components/ErrorNotification.js","components/Filter.js","components/Persons.js","components/SuccessNotification.js","services/phonebook.js","App.js","index.js"],"names":["Input","props","title","value","onChange","PersonForm","onSubmit","addPerson","newName","handleNameChange","newPhone","handlePhoneChange","type","ErrorNotification","message","console","log","className","Filter","nameFilter","handleNameFilter","Persons","persons","map","person","name","number","onClick","handleDelete","id","SuccessNotification","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","setPersons","setNewName","setNewPhone","setNameFilter","errorMessage","setErrorMessage","successMessage","setSuccessMessage","useEffect","PhonebookServices","personsToShow","length","filter","includes","event","target","preventDefault","some","toLowerCase","selectedPerson","find","result","window","confirm","changedPerson","setTimeout","catch","error","concat","n","deletePerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8363e146.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Input = props => (\n  <div>\n    {props.title}\n    <input value={props.value} onChange={props.onChange} />\n  </div>\n);\n\nconst PersonForm = props => (\n  <form onSubmit={props.addPerson}>\n    <Input\n      title={\"name: \"}\n      value={props.newName}\n      onChange={props.handleNameChange}\n    />\n    <Input\n      title={\"number: \"}\n      value={props.newPhone}\n      onChange={props.handlePhoneChange}\n    />\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst ErrorNotification = ({ message }) => {\n  \n  \nconsole.log({message});\n\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"error\">{message}</div>;\n};\n\nexport default ErrorNotification;\n","import React from \"react\";\n\nconst Filter = props => (\n  <div>\n    filter shown with:{\" \"}\n    <input value={props.nameFilter} onChange={props.handleNameFilter} />\n  </div>\n);\n\nexport default Filter;\n","import React from \"react\";\n\nconst Persons = props => {\n  return props.persons.map(person => (\n    <div>\n      {person.name} {person.number}{\" \"}\n      <button onClick={() => props.handleDelete(person.id)}>delete</button>\n    </div>\n  ));\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst SuccessNotification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"success\">{message}</div>;\n};\n\nexport default SuccessNotification;\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n  }\n\nexport default { getAll, create, update, deletePerson }","import './index.css';\n\nimport React, {useEffect, useState} from 'react';\n\nimport PersonForm from '../src/components/PersonForm';\n\nimport ErrorNotification from './components/ErrorNotification';\nimport Filter from './components/Filter';\nimport Persons from './components/Persons';\nimport SuccessNotification from './components/SuccessNotification';\nimport PhonebookServices from './services/phonebook';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newPhone, setNewPhone] = useState('');\n  const [nameFilter, setNameFilter] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n\n  useEffect(() => {\n    PhonebookServices.getAll().then(response => {\n      setPersons(response);\n    });\n  }, []);\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handlePhoneChange = event => {\n    setNewPhone(event.target.value);\n  };\n\n  const handleNameFilter = event => {\n    setNameFilter(event.target.value);\n  };\n\n  const addPerson = event => {\n    event.preventDefault();\n    let hasName = persons.some(\n      person => person['name'].toLowerCase() === newName.toLowerCase()\n    );\n\n    if (hasName) {\n      const selectedPerson = persons.find(\n        person => person['name'].toLowerCase() === newName.toLowerCase()\n      );\n      const result = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      const changedPerson = { ...selectedPerson, number: newPhone };\n      const id = selectedPerson.id;\n      if (result) {\n        PhonebookServices.update(id, changedPerson)\n          .then(response => {\n            setPersons(\n              persons.map(person => (person.id !== id ? person : response))\n            );\n            setNewName('');\n            setNewPhone('');\n            setSuccessMessage(`Updated ${response.name}`);\n            setTimeout(() => {\n              setSuccessMessage(null);\n            }, 5000);\n          })\n          .catch(error => {\n            setErrorMessage(error.response.data.error);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          });\n      }\n    } else {\n      const personObject = { name: newName, number: newPhone };\n\n      PhonebookServices.create(personObject).then(response => {\n        setPersons(persons.concat(response));\n        setNewName('');\n        setNewPhone('');\n        setSuccessMessage(`Added ${response.name}`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n        }, 5000);\n      }).catch(error => {\n        setErrorMessage(error.response.data.error);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      });\n    }\n  };\n\n  const deletePerson = id => {\n    const selectedPerson = persons.find(person => person.id == id);\n    const result = window.confirm(`Delete ${selectedPerson.name}?`);\n\n    if (result) {\n      PhonebookServices.deletePerson(id)\n        .then(response => {\n          setPersons(persons.filter(n => n.id !== id));\n        })\n        .catch(error => {\n          setErrorMessage(\n            `Information of ${selectedPerson.name} has already been removed from the server`\n          );\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const personsToShow =\n    nameFilter.length > 0\n      ? persons.filter(person => person.name.includes(nameFilter))\n      : persons;\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <SuccessNotification message={successMessage} />\n      <ErrorNotification message={errorMessage} />\n      <Filter nameFilter={nameFilter} handleNameFilter={handleNameFilter} />\n      <h2>Add a new person</h2>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newPhone={newPhone}\n        handlePhoneChange={handlePhoneChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={personsToShow} handleDelete={id => deletePerson(id)} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}